"use strict";(()=>{var e={};e.id=508,e.ids=[508],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},5346:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>y,patchFetch:()=>x,requestAsyncStorage:()=>m,routeModule:()=>h,serverHooks:()=>g,staticGenerationAsyncStorage:()=>f});var a={};r.r(a),r.d(a,{GET:()=>d,POST:()=>c});var n=r(9303),s=r(8716),o=r(670),i=r(9576),u=r(7070);let l=new Map,p=new Map;async function d(e){let{searchParams:t}=new URL(e.url),r=t.get("matchId");if(r){let e=l.get(r);return e?u.NextResponse.json(e):u.NextResponse.json({error:"Match not found"},{status:404})}{let e=Array.from(l.values()).filter(e=>"waiting"===e.status).flatMap(e=>e.players.map(t=>({address:t,joinedAt:e.createdAt})));return u.NextResponse.json({waitingPlayers:e,totalWaiting:e.length})}}async function c(e){try{let{playerAddress:t}=await e.json();if(!t)return u.NextResponse.json({error:"Player address required"},{status:400});if(p.has(t))return u.NextResponse.json({error:"Player already in a match"},{status:400});let r=null;if(l.forEach((e,a)=>{1!==e.players.length||e.players.includes(t)||(r=a)}),r){let e=l.get(r);e&&(e.players.push(t),e.status="ready")}else r=(0,i.Z)(),l.set(r,{id:r,players:[t],questions:[],answers:new Map,status:"waiting",createdAt:Date.now()});p.set(t,r);let a=Array.from(l.values()).filter(e=>"waiting"===e.status).flatMap(e=>e.players.map(t=>({address:t,joinedAt:e.createdAt}))),n=l.get(r);return u.NextResponse.json({matchId:r,status:n?.status||"unknown",players:n?.players.length||0,waitingPlayers:a})}catch(e){return u.NextResponse.json({error:"Invalid request"},{status:400})}}let h=new n.AppRouteRouteModule({definition:{kind:s.x.APP_ROUTE,page:"/api/match/route",pathname:"/api/match",filename:"route",bundlePath:"app/api/match/route"},resolvedPagePath:"/home/swarnim/Desktop/hackathons/zeno/frontend/app/api/match/route.ts",nextConfigOutput:"",userland:a}),{requestAsyncStorage:m,staticGenerationAsyncStorage:f,serverHooks:g}=h,y="/api/match/route";function x(){return(0,o.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:f})}},9576:(e,t,r)=>{r.d(t,{Z:()=>l});var a=r(6113),n=r.n(a);let s={randomUUID:n().randomUUID},o=new Uint8Array(256),i=o.length,u=[];for(let e=0;e<256;++e)u.push((e+256).toString(16).slice(1));let l=function(e,t,r){if(s.randomUUID&&!t&&!e)return s.randomUUID();let a=(e=e||{}).random||(e.rng||function(){return i>o.length-16&&(n().randomFillSync(o),i=0),o.slice(i,i+=16)})();if(a[6]=15&a[6]|64,a[8]=63&a[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=a[e];return t}return function(e,t=0){return u[e[t+0]]+u[e[t+1]]+u[e[t+2]]+u[e[t+3]]+"-"+u[e[t+4]]+u[e[t+5]]+"-"+u[e[t+6]]+u[e[t+7]]+"-"+u[e[t+8]]+u[e[t+9]]+"-"+u[e[t+10]]+u[e[t+11]]+u[e[t+12]]+u[e[t+13]]+u[e[t+14]]+u[e[t+15]]}(a)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),a=t.X(0,[948,972],()=>r(5346));module.exports=a})();
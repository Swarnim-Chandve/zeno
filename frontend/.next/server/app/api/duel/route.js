"use strict";(()=>{var e={};e.id=302,e.ids=[302],e.modules={399:e=>{e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},517:e=>{e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},6113:e=>{e.exports=require("crypto")},5105:(e,t,r)=>{r.r(t),r.d(t,{originalPathname:()=>w,patchFetch:()=>x,requestAsyncStorage:()=>f,routeModule:()=>h,serverHooks:()=>g,staticGenerationAsyncStorage:()=>m});var s={};r.r(s),r.d(s,{GET:()=>d,POST:()=>c});var n=r(9303),o=r(8716),a=r(670),u=r(9576),i=r(7070);let l=new Map;async function p(e){let t=l.get(e);if(!t)return;let r=t.players[0],s=t.players[1],n=t.answers.get(r)||[],o=t.answers.get(s)||[],a=n.filter(e=>e.isCorrect).length,u=o.filter(e=>e.isCorrect).length,i=null;return a>u?i=r:u>a&&(i=s),t.status="completed",t.winner=i,t.scores={[r]:a,[s]:u},{winner:i,scores:t.scores,questions:t.questions}}async function d(e){let{searchParams:t}=new URL(e.url),r=t.get("matchId");if(!r)return i.NextResponse.json({error:"Match ID required"},{status:400});let s=l.get(r);return s?i.NextResponse.json({status:s.status,players:s.players,answers:Object.fromEntries(s.answers),winner:s.winner,scores:s.scores,questions:s.questions}):i.NextResponse.json({error:"Match not found"},{status:404})}async function c(e){try{let{matchId:t,playerAddress:r,action:s,answer:n,questionId:o,currentQuestion:a}=await e.json();if(!t||!r||!s)return i.NextResponse.json({error:"Missing required fields"},{status:400});let d=l.get(t);if(!d)return i.NextResponse.json({error:"Match not found"},{status:404});if("start"===s){let e=Array.from({length:3},()=>(function(){let e,t,r;let s=["+","-","*"],n=s[Math.floor(Math.random()*s.length)];switch(n){case"+":r=(e=Math.floor(50*Math.random())+1)+(t=Math.floor(50*Math.random())+1);break;case"-":r=(e=Math.floor(50*Math.random())+25)-(t=Math.floor(25*Math.random())+1);break;case"*":r=(e=Math.floor(12*Math.random())+1)*(t=Math.floor(12*Math.random())+1);break;default:e=1,t=1,r=2}return{question:`${e} ${n} ${t} = ?`,answer:r,id:(0,u.Z)()}})());return d.questions=e,d.status="active",i.NextResponse.json({status:"active",questions:e,players:d.players})}if("submit"===s){if(!n||!o)return i.NextResponse.json({error:"Answer and question ID required"},{status:400});let e=d.questions.find(e=>e.id===o);if(!e)return i.NextResponse.json({error:"Question not found"},{status:404});let s=parseInt(n)===e.answer;if(d.answers.has(r)||d.answers.set(r,[]),d.answers.get(r).push({questionId:o,answer:parseInt(n),isCorrect:s,timestamp:Date.now()}),d.players.every(e=>(d.answers.get(e)||[]).length>=d.questions.length)){let e=await p(t);return i.NextResponse.json({status:"completed",result:e})}return i.NextResponse.json({status:"active",currentQuestion:a+1,totalQuestions:d.questions.length})}return i.NextResponse.json({error:"Invalid action"},{status:400})}catch(e){return i.NextResponse.json({error:"Invalid request"},{status:400})}}let h=new n.AppRouteRouteModule({definition:{kind:o.x.APP_ROUTE,page:"/api/duel/route",pathname:"/api/duel",filename:"route",bundlePath:"app/api/duel/route"},resolvedPagePath:"/home/swarnim/Desktop/hackathons/zeno/frontend/app/api/duel/route.ts",nextConfigOutput:"",userland:s}),{requestAsyncStorage:f,staticGenerationAsyncStorage:m,serverHooks:g}=h,w="/api/duel/route";function x(){return(0,a.patchFetch)({serverHooks:g,staticGenerationAsyncStorage:m})}},9576:(e,t,r)=>{r.d(t,{Z:()=>l});var s=r(6113),n=r.n(s);let o={randomUUID:n().randomUUID},a=new Uint8Array(256),u=a.length,i=[];for(let e=0;e<256;++e)i.push((e+256).toString(16).slice(1));let l=function(e,t,r){if(o.randomUUID&&!t&&!e)return o.randomUUID();let s=(e=e||{}).random||(e.rng||function(){return u>a.length-16&&(n().randomFillSync(a),u=0),a.slice(u,u+=16)})();if(s[6]=15&s[6]|64,s[8]=63&s[8]|128,t){r=r||0;for(let e=0;e<16;++e)t[r+e]=s[e];return t}return function(e,t=0){return i[e[t+0]]+i[e[t+1]]+i[e[t+2]]+i[e[t+3]]+"-"+i[e[t+4]]+i[e[t+5]]+"-"+i[e[t+6]]+i[e[t+7]]+"-"+i[e[t+8]]+i[e[t+9]]+"-"+i[e[t+10]]+i[e[t+11]]+i[e[t+12]]+i[e[t+13]]+i[e[t+14]]+i[e[t+15]]}(s)}}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[948,972],()=>r(5105));module.exports=s})();
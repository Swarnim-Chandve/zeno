(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{399:function(e,s,a){Promise.resolve().then(a.bind(a,2847))},2847:function(e,s,a){"use strict";a.r(s),a.d(s,{default:function(){return y}});var t=a(7437),l=a(4842),n=a(4934),c=a(4703),r=a(2265),i=a(5737),d=a(8094),x=a(5016),o=a(1240),m=a(4697),h=a(4109);function u(e){let{onMatchFound:s,onBack:a,isDemoMode:n=!1,playerAddress:c}=e,{address:i}=(0,l.m)(),[d,x]=(0,r.useState)("searching"),[u,j]=(0,r.useState)(null),[g,b]=(0,r.useState)(null);return((0,r.useEffect)(()=>{let e=n?c:i;e&&(async()=>{try{let a=await fetch("http://localhost:3001/match",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({playerAddress:e})});if(!a.ok)throw Error("Failed to find match");let t=await a.json();j(t.matchId),"ready"===t.status?(x("found"),s({...t,playerAddress:e})):x("searching")}catch(e){b(e instanceof Error?e.message:"Unknown error"),x("error")}})()},[i,s,n,c]),"error"===d)?(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)(m.Z,{className:"w-8 h-8 text-red-500"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Matchmaking Failed"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:g}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsx)("button",{onClick:()=>window.location.reload(),className:"w-full bg-avalanche-500 hover:bg-avalanche-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200",children:"Try Again"}),(0,t.jsx)("button",{onClick:a,className:"w-full bg-gray-200 hover:bg-gray-300 text-gray-800 font-semibold py-3 px-6 rounded-lg transition-colors duration-200",children:"Back to Home"})]})]})})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-avalanche-100 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)(o.Z,{className:"w-8 h-8 text-avalanche-500"})}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Finding Opponent"}),(0,t.jsx)("p",{className:"text-gray-600 mb-6",children:"searching"===d?"Searching for an opponent...":"Match found! Starting duel..."}),(0,t.jsx)("div",{className:"flex justify-center mb-6",children:(0,t.jsx)(h.Z,{className:"w-8 h-8 text-avalanche-500 animate-spin"})}),(0,t.jsxs)("div",{className:"text-sm text-gray-500",children:["Match ID: ",null==u?void 0:u.slice(0,8),"..."]})]})})})}var j=a(933),g=a(5862),b=a(9738);function f(e){let{match:s,onComplete:a,onBack:n,isDemoMode:c=!1}=e,{address:i}=(0,l.m)(),[d,x]=(0,r.useState)([]),[o,m]=(0,r.useState)(0),[h,u]=(0,r.useState)([]),[f,v]=(0,r.useState)(""),[N,p]=(0,r.useState)(30),[y,w]=(0,r.useState)(!1),[k,S]=(0,r.useState)(null),C=(0,r.useRef)(null);(0,r.useEffect)(()=>{let e=c?s.playerAddress:i;if(!e)return;let t=new WebSocket("ws://localhost:3001");return t.onopen=()=>{t.send(JSON.stringify({type:"join",playerAddress:e}))},t.onmessage=e=>{let s=JSON.parse(e.data);"questions"===s.type?(x(s.questions),p(30),A()):"match_completed"===s.type&&a(s)},S(t),setTimeout(()=>{t.send(JSON.stringify({type:"start_duel",matchId:s.matchId,playerAddress:e}))},1e3),()=>{t.close()}},[i,s.matchId,a,c,s.playerAddress]);let A=()=>{C.current&&clearInterval(C.current),C.current=setInterval(()=>{p(e=>e<=1?(Z(),0):e-1)},1e3)},Z=()=>{var e;if(y||!k)return;let a=parseInt(f)||0;u([...h,a]),w(!0);let t=c?s.playerAddress:i;k.send(JSON.stringify({type:"submit_answer",playerAddress:t,matchId:s.matchId,answer:a,questionId:null===(e=d[o])||void 0===e?void 0:e.id})),o<d.length-1&&setTimeout(()=>{m(e=>e+1),v(""),w(!1),p(30),A()},1e3)};if(0===d.length)return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-avalanche-500 mx-auto mb-4"}),(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Preparing Questions"}),(0,t.jsx)("p",{className:"text-gray-600",children:"Get ready for the math duel!"})]})})});let O=d[o],D=h[o]===(null==O?void 0:O.answer);return d.length,(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsx)("button",{onClick:n,className:"text-avalanche-600 hover:text-avalanche-700 font-medium",children:"â† Back"}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Math Duel"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:["Question ",o+1," of ",d.length]}),(0,t.jsxs)("div",{className:"flex items-center gap-2 text-avalanche-600",children:[(0,t.jsx)(j.Z,{className:"w-4 h-4"}),(0,t.jsxs)("span",{className:"font-mono text-lg",children:[N,"s"]})]})]})]}),(0,t.jsxs)("div",{className:"max-w-2xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h2",{className:"text-4xl font-bold text-gray-900 mb-4",children:O.question}),y&&(0,t.jsxs)("div",{className:"mb-6",children:[D?(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-green-600 text-lg",children:[(0,t.jsx)(g.Z,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"font-semibold",children:"Correct!"})]}):(0,t.jsxs)("div",{className:"flex items-center justify-center gap-2 text-red-600 text-lg",children:[(0,t.jsx)(b.Z,{className:"w-6 h-6"}),(0,t.jsx)("span",{className:"font-semibold",children:"Incorrect"})]}),(0,t.jsxs)("p",{className:"text-gray-600 mt-2",children:["Your answer: ",h[o]," | Correct answer: ",O.answer]})]}),!y&&(0,t.jsx)("div",{className:"mb-6",children:(0,t.jsx)("input",{type:"number",value:f,onChange:e=>{v(e.target.value)},onKeyPress:e=>{"Enter"!==e.key||y||Z()},placeholder:"Enter your answer",className:"w-full max-w-xs text-center text-2xl font-mono border-2 border-gray-300 rounded-lg px-4 py-3 focus:border-avalanche-500 focus:outline-none",autoFocus:!0})}),(0,t.jsx)("button",{onClick:Z,disabled:y||!f,className:"bg-avalanche-500 hover:bg-avalanche-600 disabled:bg-gray-300 text-white font-bold py-3 px-8 rounded-lg transition-colors duration-200",children:y?"Submitted":"Submit Answer"})]}),(0,t.jsx)("div",{className:"w-full bg-gray-200 rounded-full h-2",children:(0,t.jsx)("div",{className:"bg-avalanche-500 h-2 rounded-full transition-all duration-1000",style:{width:"".concat((o+1)/d.length*100,"%")}})})]}),(0,t.jsxs)("div",{className:"mt-6 text-center text-gray-600",children:[(0,t.jsx)("p",{children:"Answer as quickly and accurately as possible!"}),(0,t.jsx)("p",{className:"text-sm mt-2",children:"Speed and accuracy both count towards your final score."})]})]})]})})}var v=a(6706),N=a(1902);function p(e){let{results:s,onPlayAgain:a,isDemoMode:l=!1}=e,{winner:n,scores:c,questions:r}=s,i=n===s.playerAddress;return(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100",children:(0,t.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("div",{className:"mx-auto w-20 h-20 rounded-full flex items-center justify-center mb-6 ".concat(i?"bg-yellow-100":"bg-gray-100"),children:(0,t.jsx)(x.Z,{className:"w-10 h-10 ".concat(i?"text-yellow-500":"text-gray-400")})}),(0,t.jsx)("h1",{className:"text-4xl font-bold mb-4 ".concat(i?"text-yellow-600":"text-gray-600"),children:i?"You Won!":"You Lost"}),(0,t.jsx)("p",{className:"text-xl text-gray-600",children:i?"Congratulations! You won the math duel!":"Better luck next time!"})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[(0,t.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Duel Results"}),(0,t.jsx)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:Object.entries(c).map(e=>{let[a,l]=e;return(0,t.jsxs)("div",{className:"p-6 rounded-xl border-2 ".concat(a===n?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-gray-50"),children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,t.jsx)("h3",{className:"font-semibold text-gray-900",children:a===s.playerAddress?"You":"Opponent"}),a===n&&(0,t.jsx)(x.Z,{className:"w-6 h-6 text-yellow-500"})]}),(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Score:"}),(0,t.jsx)("span",{className:"font-semibold",children:l.score.toFixed(2)})]}),(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("span",{className:"text-gray-600",children:"Total Time:"}),(0,t.jsxs)("span",{className:"font-semibold",children:[(l.totalTime/1e3).toFixed(1),"s"]})]})]})]},a)})}),(0,t.jsxs)("div",{className:"mb-8",children:[(0,t.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions Review"}),(0,t.jsx)("div",{className:"space-y-3",children:r.map((e,s)=>(0,t.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,t.jsx)("span",{className:"font-mono text-lg",children:e.question}),(0,t.jsxs)("span",{className:"text-gray-600",children:["Answer: ",e.answer]})]},s))})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("button",{onClick:a,className:"bg-avalanche-500 hover:bg-avalanche-600 text-white font-bold py-4 px-8 rounded-xl text-lg transition-colors duration-200 flex items-center gap-3 mx-auto",children:[(0,t.jsx)(v.Z,{className:"w-6 h-6"}),"Play Again"]})})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,t.jsx)(N.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Accuracy"}),(0,t.jsx)("p",{className:"text-2xl font-bold text-avalanche-600",children:Object.values(c).map(e=>e.score).reduce((e,s)=>Math.max(e,s),0).toFixed(1)})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,t.jsx)(j.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Speed"}),(0,t.jsxs)("p",{className:"text-2xl font-bold text-avalanche-600",children:[Object.values(c).map(e=>e.totalTime).reduce((e,s)=>Math.min(e,s),1/0)/1e3,"s"]})]}),(0,t.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,t.jsx)(x.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Winner"}),(0,t.jsx)("p",{className:"text-lg font-bold text-avalanche-600",children:i?"You":"Opponent"})]})]})]})})})}function y(){let{address:e,isConnected:s}=(0,l.m)(),{connect:a,connectors:m}=(0,n.$)(),{disconnect:h}=(0,c.q)(),[j,g]=(0,r.useState)("home"),[b,v]=(0,r.useState)(!1),[N,y]=(0,r.useState)(null),[w,k]=(0,r.useState)(null),S=()=>{g("home"),v(!1),y(null),k(null)};return s||b?"matchmaking"===j?(0,t.jsx)(u,{onMatchFound:e=>{y(e),g("duel")},onBack:S,isDemoMode:b,playerAddress:b?"0xDemoPlayer123...":e}):"duel"===j&&N?(0,t.jsx)(f,{match:N,onComplete:e=>{k(e),g("results")},onBack:S,isDemoMode:b}):"results"===j&&w?(0,t.jsx)(p,{results:w,onPlayAgain:S,isDemoMode:b}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100",children:(0,t.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,t.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,t.jsxs)("div",{className:"flex items-center gap-3",children:[(0,t.jsx)("div",{className:"w-10 h-10 bg-avalanche-500 rounded-full flex items-center justify-center",children:(0,t.jsx)(x.Z,{className:"w-6 h-6 text-white"})}),(0,t.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Math Duel Game"})]}),(0,t.jsxs)("div",{className:"flex items-center gap-4",children:[(0,t.jsxs)("div",{className:"text-sm text-gray-600",children:[null==e?void 0:e.slice(0,6),"...",null==e?void 0:e.slice(-4)]}),(0,t.jsx)("button",{onClick:()=>h(),className:"text-avalanche-600 hover:text-avalanche-700 font-medium",children:"Disconnect"})]})]}),(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[(0,t.jsxs)("div",{className:"text-center mb-8",children:[(0,t.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Duel?"}),(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"Test your math skills in real-time 1v1 battles on Avalanche!"})]}),(0,t.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,t.jsxs)("div",{className:"text-center p-6 bg-avalanche-50 rounded-xl",children:[(0,t.jsx)(o.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"1v1 Battles"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Face off against real opponents"})]}),(0,t.jsxs)("div",{className:"text-center p-6 bg-avalanche-50 rounded-xl",children:[(0,t.jsx)(x.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Win Rewards"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Winner takes all the stakes"})]}),(0,t.jsxs)("div",{className:"text-center p-6 bg-avalanche-50 rounded-xl",children:[(0,t.jsx)(d.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,t.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Real-time"}),(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Fast-paced math challenges"})]})]}),(0,t.jsx)("div",{className:"text-center",children:(0,t.jsxs)("button",{onClick:()=>g("matchmaking"),className:"bg-avalanche-500 hover:bg-avalanche-600 text-white font-bold py-4 px-8 rounded-xl text-lg transition-colors duration-200 flex items-center gap-3 mx-auto",children:[(0,t.jsx)(d.Z,{className:"w-6 h-6"}),"Find Opponent"]})})]}),(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,t.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"How to Play"}),(0,t.jsxs)("div",{className:"space-y-4 text-gray-600",children:[(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-avalanche-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"1"}),(0,t.jsx)("p",{children:"Connect your wallet and get some USDC.e test tokens from the faucet"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-avalanche-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"2"}),(0,t.jsx)("p",{children:'Click "Find Opponent" to start matchmaking'})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-avalanche-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"3"}),(0,t.jsx)("p",{children:"Answer 3 math questions as fast and accurately as possible"})]}),(0,t.jsxs)("div",{className:"flex items-start gap-3",children:[(0,t.jsx)("div",{className:"w-6 h-6 bg-avalanche-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"4"}),(0,t.jsx)("p",{children:"Winner gets 2x the stake amount instantly!"})]})]})]})]})]})}):(0,t.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100 flex items-center justify-center",children:(0,t.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"mx-auto w-16 h-16 bg-avalanche-500 rounded-full flex items-center justify-center mb-6",children:(0,t.jsx)(i.Z,{className:"w-8 h-8 text-white"})}),(0,t.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Math Duel Game"}),(0,t.jsx)("p",{className:"text-gray-600 mb-8",children:"Connect your wallet to start playing 1v1 math duels on Avalanche!"}),(0,t.jsxs)("div",{className:"space-y-3",children:[m.map(e=>(0,t.jsxs)("button",{onClick:()=>a({connector:e}),className:"w-full bg-avalanche-500 hover:bg-avalanche-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,t.jsx)(i.Z,{className:"w-5 h-5"}),"Connect ",e.name]},e.uid)),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,t.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,t.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,t.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),(0,t.jsxs)("button",{onClick:()=>{v(!0),g("matchmaking")},className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,t.jsx)(d.Z,{className:"w-5 h-5"}),"Demo Mode (No Wallet)"]})]})]})})})}}},function(e){e.O(0,[50,577,971,23,744],function(){return e(e.s=399)}),_N_E=e.O()}]);
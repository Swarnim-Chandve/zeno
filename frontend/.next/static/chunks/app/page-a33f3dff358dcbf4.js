(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{399:function(e,s,t){Promise.resolve().then(t.bind(t,20))},20:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return M}});var a=t(7437),l=t(2265),n=t(5737),i=t(8094),r=t(5016),c=t(1240),d=t(4842),o=t(4109),x=t(933),m=t(4697),h=t(6160),u=t(5984);function b(e){let{onMatchFound:s,onBack:t,isDemoMode:n=!1,playerAddress:i}=e,{address:r}=(0,d.m)(),[b,j]=(0,l.useState)("connecting"),[g,w]=(0,l.useState)(null),[f,N]=(0,l.useState)(null),[p,v]=(0,l.useState)([]),[y,S]=(0,l.useState)(0),[k,Z]=(0,l.useState)(null),[C,O]=(0,l.useState)(!1),D=(0,l.useRef)(null),P=(0,l.useRef)(null);return(0,l.useEffect)(()=>{let e=n?i:r;if(!e)return;let t="player_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));P.current=t,console.log("Connecting to WebSocket:",null),console.log("WebSocket disabled in production, using polling system"),O(!0),j("searching"),setTimeout(()=>{let t="match_".concat(Date.now(),"_").concat(Math.random().toString(36).substr(2,9));Z(t),w(t),j("found"),s({matchId:t,status:"ready",players:[e,"opponent"],playerAddress:e})},2e3)},[r,s,n,i]),(0,l.useEffect)(()=>{if(!C)return;let e=async()=>{try{let e=await fetch("/api/online-players");if(e.ok){let s=await e.json();S(s.totalOnline),v(s.waitingPlayers)}}catch(e){console.error("Failed to fetch online players:",e)}},s=setInterval(e,2e3);return e(),()=>clearInterval(s)},[C]),(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full border border-white/20",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h1",{className:"text-3xl font-bold text-white mb-2",children:"Math Duel"}),(0,a.jsx)("p",{className:"text-white/80",children:"Find your opponent and battle!"})]}),(0,a.jsx)("div",{className:"flex items-center justify-center mb-6",children:(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[C?(0,a.jsx)(h.Z,{className:"w-5 h-5 text-green-400"}):(0,a.jsx)(u.Z,{className:"w-5 h-5 text-red-400"}),(0,a.jsx)("span",{className:"text-white/80 text-sm",children:C?"Connected":"Disconnected"})]})}),(0,a.jsxs)("div",{className:"bg-white/10 rounded-lg p-4 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(c.Z,{className:"w-5 h-5 text-blue-400"}),(0,a.jsxs)("span",{className:"text-white font-medium",children:[y," Player",1!==y?"s":""," Online"]})]}),(0,a.jsx)("button",{onClick:()=>{D.current&&D.current.readyState===WebSocket.OPEN&&D.current.send(JSON.stringify({type:"get_lobby_status",lobbyId:k}))},className:"text-blue-400 hover:text-blue-300 transition-colors",disabled:!C,children:(0,a.jsx)(x.Z,{className:"w-4 h-4"})})]}),y>0&&(0,a.jsxs)("div",{className:"mt-2 text-sm text-white/70",children:[p.length," waiting for match"]})]}),(0,a.jsxs)("div",{className:"bg-white/10 rounded-lg p-6 mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-3 mb-4",children:[C?"waiting"===b?(0,a.jsx)(x.Z,{className:"w-5 h-5"}):"found"===b?(0,a.jsx)(c.Z,{className:"w-5 h-5 text-green-500"}):"error"===b?(0,a.jsx)(m.Z,{className:"w-5 h-5 text-red-500"}):(0,a.jsx)(o.Z,{className:"w-5 h-5 animate-spin"}):(0,a.jsx)(o.Z,{className:"w-5 h-5 animate-spin"}),(0,a.jsx)("span",{className:"text-white font-medium text-lg",children:C?"waiting"===b?"Waiting for another player...":"found"===b?"Match found! Starting game...":"error"===b?f||"Something went wrong":"Searching for players...":"Connecting to game server..."})]}),"waiting"===b&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("div",{className:"animate-pulse text-white/60",children:["Share this lobby ID: ",(0,a.jsx)("span",{className:"font-mono bg-white/20 px-2 py-1 rounded",children:k})]})}),"found"===b&&(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("div",{className:"text-green-400 font-medium",children:"\uD83C\uDFAE Game starting in 3 seconds..."})})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsxs)("button",{onClick:t,className:"flex-1 bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg transition-colors flex items-center justify-center space-x-2",children:[(0,a.jsx)(m.Z,{className:"w-4 h-4"}),(0,a.jsx)("span",{children:"Back"})]}),"error"===b&&(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Retry"})]}),!1]})})}var j=t(5430),g=t(9738),w=t(5137),f=t(5862);function N(e){let{match:s,onBack:t,isDemoMode:n=!1}=e,{address:i}=(0,d.m)(),[c,o]=(0,l.useState)([]),[m,h]=(0,l.useState)(0),[u,b]=(0,l.useState)(""),[N,p]=(0,l.useState)(30),[v,y]=(0,l.useState)("waiting"),[S,k]=(0,l.useState)([]),[Z,C]=(0,l.useState)([]),[O,D]=(0,l.useState)([]),[P,I]=(0,l.useState)(!1),[M,E]=(0,l.useState)(!1),[R,W]=(0,l.useState)(!1),[A,F]=(0,l.useState)(null),L=(0,l.useRef)(null),_=(0,l.useRef)(null),q=n?s.playerAddress:i;(0,l.useEffect)(()=>{q&&(console.log("Connecting to WebSocket for duel:",null),console.log("WebSocket disabled in production, using simulation"),W(!0),y("playing"),o([{id:0,question:"5 + 3",answer:8,timeLimit:30},{id:1,question:"12 - 7",answer:5,timeLimit:30},{id:2,question:"4 \xd7 6",answer:24,timeLimit:30},{id:3,question:"18 \xf7 2",answer:9,timeLimit:30},{id:4,question:"9 + 11",answer:20,timeLimit:30}]),k([{id:q,address:q,score:0,answers:[]},{id:"opponent",address:"opponent",score:0,answers:[]}]))},[q,s.matchId]),(0,l.useEffect)(()=>{var e;if("playing"===v&&!(m>=c.length))return p((null===(e=c[m])||void 0===e?void 0:e.timeLimit)||30),_.current=setInterval(()=>{p(e=>e<=1?(B(""),0):e-1)},1e3),()=>{_.current&&clearInterval(_.current)}},[v,m,c]);let B=e=>{if(m>=c.length)return;let t=c[m],a=parseInt(e)||0,l=a===t.answer,n={questionId:t.id,answer:a,isCorrect:l,timestamp:Date.now()};D(e=>[...e,n]),E(l),I(!0),l&&k(e=>e.map(e=>e.address===q?{...e,score:e.score+1}:e)),L.current&&L.current.readyState===WebSocket.OPEN&&L.current.send(JSON.stringify({type:"submit_answer",playerId:q,questionId:t.id,answer:a,lobbyId:s.matchId})),setTimeout(()=>{I(!1),m<c.length-1?(h(e=>e+1),b("")):y("finished")},2e3)},Y=e=>{if(!e)return 0;let s=S.find(s=>s.address===e);return s?s.score:0},T=()=>{let e=S.find(e=>e.address!==q);return e?e.score:0};if("waiting"===v)return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full border border-white/20 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[(0,a.jsx)(x.Z,{className:"w-16 h-16 text-blue-400 mx-auto mb-4 animate-pulse"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:"Waiting for Game to Start"}),(0,a.jsx)("p",{className:"text-white/80",children:"Both players are ready. Starting soon..."})]}),(0,a.jsxs)("div",{className:"bg-white/10 rounded-lg p-4 mb-6",children:[(0,a.jsx)("div",{className:"text-white/80 mb-2",children:"Players in lobby:"}),S.map((e,s)=>(0,a.jsxs)("div",{className:"text-white font-medium",children:[e.address===q?"You":"Opponent",e.address===q&&" (You)"]},s))]}),(0,a.jsx)("button",{onClick:t,className:"bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg transition-colors",children:"Back to Menu"})]})});if((0,l.useEffect)(()=>{if("finished"===v&&q){let e=Y(q),s=T(),t=e>s,a=10*e;t&&(a+=50),e===s&&(a+=25),window.addPlayerScore&&window.addPlayerScore(q,a,t)}},[v,q]),"finished"===v){let e=(()=>{if(S.length<2)return null;let[e,s]=S;return e.score>s.score?e.address:s.score>e.score?s.address:null})(),s=e===q,l=!e;return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-md w-full border border-white/20 text-center",children:[(0,a.jsxs)("div",{className:"mb-6",children:[s?(0,a.jsx)(r.Z,{className:"w-16 h-16 text-yellow-400 mx-auto mb-4"}):l?(0,a.jsx)(j.Z,{className:"w-16 h-16 text-blue-400 mx-auto mb-4"}):(0,a.jsx)(g.Z,{className:"w-16 h-16 text-red-400 mx-auto mb-4"}),(0,a.jsx)("h2",{className:"text-2xl font-bold text-white mb-2",children:s?"\uD83C\uDF89 You Won!":l?"It's a Tie!":"Game Over"}),(0,a.jsx)("p",{className:"text-white/80",children:"Final Scores"})]}),(0,a.jsx)("div",{className:"bg-white/10 rounded-lg p-6 mb-6",children:(0,a.jsx)("div",{className:"space-y-4",children:S.map((e,s)=>(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("span",{className:"text-white font-medium",children:e.address===q?"You":"Opponent"}),(0,a.jsxs)("span",{className:"text-white text-xl font-bold",children:[e.score,"/",c.length]})]},s))})}),(0,a.jsxs)("div",{className:"bg-gradient-to-r from-yellow-500/20 to-yellow-600/20 rounded-lg p-4 mb-6 border border-yellow-500/30",children:[(0,a.jsxs)("div",{className:"text-yellow-400 font-bold text-lg",children:["+",10*Y(q)+(s?50:l?25:0)," points earned!"]}),(0,a.jsx)("div",{className:"text-yellow-300 text-sm",children:s?"Winner bonus: +50":l?"Tie bonus: +25":"Base score only"})]}),(0,a.jsxs)("div",{className:"flex space-x-4",children:[(0,a.jsx)("button",{onClick:t,className:"flex-1 bg-white/20 hover:bg-white/30 text-white px-6 py-3 rounded-lg transition-colors",children:"Back to Menu"}),(0,a.jsx)("button",{onClick:()=>window.location.reload(),className:"flex-1 bg-blue-600 hover:bg-blue-700 text-white px-6 py-3 rounded-lg transition-colors",children:"Play Again"})]})]})})}let J=c[m]||null;return J?(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-purple-900 via-blue-900 to-indigo-900 flex items-center justify-center p-4",children:(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-2xl p-8 max-w-2xl w-full border border-white/20",children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-8",children:[(0,a.jsxs)("button",{onClick:t,className:"flex items-center space-x-2 text-white/80 hover:text-white transition-colors",children:[(0,a.jsx)(w.Z,{className:"w-5 h-5"}),(0,a.jsx)("span",{children:"Back"})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-white/80 text-sm",children:["Question ",m+1," of ",c.length]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-white",children:J.question})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(x.Z,{className:"w-5 h-5 text-white/80"}),(0,a.jsxs)("span",{className:"text-white font-bold text-xl",children:[N,"s"]})]})]}),(0,a.jsxs)("div",{className:"flex justify-between mb-8",children:[(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-white/80 text-sm flex items-center justify-center gap-2",children:["You","user"===A&&(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-white transition-all duration-300 ".concat("user"===A?"scale-110 text-green-400":""),children:Y(q)})]}),(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsxs)("div",{className:"text-white/80 text-sm flex items-center justify-center gap-2",children:["Opponent","opponent"===A&&(0,a.jsx)("div",{className:"w-2 h-2 bg-red-400 rounded-full animate-pulse"})]}),(0,a.jsx)("div",{className:"text-2xl font-bold text-white transition-all duration-300 ".concat("opponent"===A?"scale-110 text-red-400":""),children:T()})]})]}),(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsxs)("div",{className:"text-6xl font-bold text-white mb-8",children:[J.question," = ?"]}),(0,a.jsx)("div",{className:"max-w-xs mx-auto",children:(0,a.jsx)("input",{type:"number",value:u,onChange:e=>b(e.target.value),onKeyPress:e=>{"Enter"===e.key&&u.trim()&&B(u)},placeholder:"Your answer",className:"w-full px-6 py-4 text-2xl text-center bg-white/20 border border-white/30 rounded-lg text-white placeholder-white/50 focus:outline-none focus:ring-2 focus:ring-blue-500",disabled:P,autoFocus:!0})})]}),P&&(0,a.jsx)("div",{className:"text-center mb-6",children:M?(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-green-400",children:[(0,a.jsx)(f.Z,{className:"w-6 h-6"}),(0,a.jsx)("span",{className:"text-xl font-bold",children:"Correct!"})]}):(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-red-400",children:[(0,a.jsx)(g.Z,{className:"w-6 h-6"}),(0,a.jsxs)("span",{className:"text-xl font-bold",children:["Wrong! Answer was ",J.answer]})]})}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsx)("button",{onClick:()=>B(u),disabled:!u.trim()||P,className:"bg-blue-600 hover:bg-blue-700 disabled:bg-white/20 disabled:cursor-not-allowed text-white px-8 py-4 rounded-lg text-xl font-bold transition-colors",children:"Submit Answer"})}),(0,a.jsx)("div",{className:"mt-6 text-center",children:(0,a.jsxs)("div",{className:"inline-flex items-center space-x-2 text-sm ".concat(R?"text-green-400":"text-red-400"),children:[(0,a.jsx)("div",{className:"w-2 h-2 rounded-full ".concat(R?"bg-green-400":"bg-red-400")}),(0,a.jsx)("span",{children:R?"Connected":"Disconnected"})]})})]})}):null}var p=t(6706),v=t(1902);function y(e){let{results:s,onPlayAgain:t,isDemoMode:l=!1}=e,{winner:n,scores:i,questions:c}=s,d=n===s.playerAddress;return(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100",children:(0,a.jsx)("div",{className:"container mx-auto px-4 py-8",children:(0,a.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("div",{className:"mx-auto w-20 h-20 rounded-full flex items-center justify-center mb-6 ".concat(d?"bg-yellow-100":"bg-gray-100"),children:(0,a.jsx)(r.Z,{className:"w-10 h-10 ".concat(d?"text-yellow-500":"text-gray-400")})}),(0,a.jsx)("h1",{className:"text-4xl font-bold mb-4 ".concat(d?"text-yellow-600":"text-gray-600"),children:d?"You Won!":"You Lost"}),(0,a.jsx)("p",{className:"text-xl text-gray-600",children:d?"Congratulations! You won the math duel!":"Better luck next time!"})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Duel Results"}),(0,a.jsx)("div",{className:"grid md:grid-cols-2 gap-6 mb-8",children:Object.entries(i).map(e=>{let[t,l]=e;return(0,a.jsxs)("div",{className:"p-6 rounded-xl border-2 ".concat(t===n?"border-yellow-200 bg-yellow-50":"border-gray-200 bg-gray-50"),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-4",children:[(0,a.jsx)("h3",{className:"font-semibold text-gray-900",children:t===s.playerAddress?"You":"Opponent"}),t===n&&(0,a.jsx)(r.Z,{className:"w-6 h-6 text-yellow-500"})]}),(0,a.jsxs)("div",{className:"space-y-3",children:[(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Score:"}),(0,a.jsx)("span",{className:"font-semibold",children:l.score.toFixed(2)})]}),(0,a.jsxs)("div",{className:"flex justify-between",children:[(0,a.jsx)("span",{className:"text-gray-600",children:"Total Time:"}),(0,a.jsxs)("span",{className:"font-semibold",children:[(l.totalTime/1e3).toFixed(1),"s"]})]})]})]},t)})}),(0,a.jsxs)("div",{className:"mb-8",children:[(0,a.jsx)("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Questions Review"}),(0,a.jsx)("div",{className:"space-y-3",children:c.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[(0,a.jsx)("span",{className:"font-mono text-lg",children:e.question}),(0,a.jsxs)("span",{className:"text-gray-600",children:["Answer: ",e.answer]})]},s))})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{onClick:t,className:"bg-avalanche-500 hover:bg-avalanche-600 text-white font-bold py-4 px-8 rounded-xl text-lg transition-colors duration-200 flex items-center gap-3 mx-auto",children:[(0,a.jsx)(p.Z,{className:"w-6 h-6"}),"Play Again"]})})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6",children:[(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,a.jsx)(v.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Accuracy"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-avalanche-600",children:Object.values(i).map(e=>e.score).reduce((e,s)=>Math.max(e,s),0).toFixed(1)})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,a.jsx)(x.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Speed"}),(0,a.jsxs)("p",{className:"text-2xl font-bold text-avalanche-600",children:[Object.values(i).map(e=>e.totalTime).reduce((e,s)=>Math.min(e,s),1/0)/1e3,"s"]})]}),(0,a.jsxs)("div",{className:"bg-white rounded-xl shadow-lg p-6 text-center",children:[(0,a.jsx)(r.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Winner"}),(0,a.jsx)("p",{className:"text-lg font-bold text-avalanche-600",children:d?"You":"Opponent"})]})]})]})})})}var S=t(957),k=t(3805),Z=t(8281);function C(e){let{className:s="",showOnlineOnly:t=!1,maxPlayers:n=10}=e,[i,d]=(0,l.useState)([]),[o,x]=(0,l.useState)(!0),[m,h]=(0,l.useState)(new Date);(0,l.useEffect)(()=>{(async()=>{try{let e=localStorage.getItem("math-duel-leaderboard");if(e){let s=JSON.parse(e);d(s)}else{let e=[{address:"0x1234...5678",score:1250,gamesPlayed:15,wins:12,losses:3,winRate:80,lastPlayed:Date.now()-3e5,isOnline:!0},{address:"0x9876...4321",score:1180,gamesPlayed:12,wins:9,losses:3,winRate:75,lastPlayed:Date.now()-9e5,isOnline:!0},{address:"0x5555...7777",score:950,gamesPlayed:8,wins:5,losses:3,winRate:62.5,lastPlayed:Date.now()-18e5,isOnline:!1}];d(e),localStorage.setItem("math-duel-leaderboard",JSON.stringify(e))}}catch(e){console.error("Error loading leaderboard:",e)}finally{x(!1)}})()},[]),(0,l.useEffect)(()=>{let e=setInterval(()=>{h(new Date),d(e=>e.map(e=>({...e,isOnline:Math.random()>.3})))},5e3);return()=>clearInterval(e)},[]);let u=(e,s,t)=>{d(a=>{let l=a.find(s=>s.address===e);if(l){let n={...l,score:l.score+s,gamesPlayed:l.gamesPlayed+1,wins:l.wins+(t?1:0),losses:l.losses+(t?0:1),winRate:(l.wins+(t?1:0))/(l.gamesPlayed+1)*100,lastPlayed:Date.now(),isOnline:!0},i=a.map(s=>s.address===e?n:s);return localStorage.setItem("math-duel-leaderboard",JSON.stringify(i)),i}{let l=[...a,{address:e,score:Math.max(0,s),gamesPlayed:1,wins:t?1:0,losses:t?0:1,winRate:t?100:0,lastPlayed:Date.now(),isOnline:!0}];return localStorage.setItem("math-duel-leaderboard",JSON.stringify(l)),l}})};(0,l.useEffect)(()=>(window.addPlayerScore=u,()=>{delete window.addPlayerScore}),[]);let b=t?i.filter(e=>e.isOnline):i,g=b.sort((e,s)=>s.score-e.score).slice(0,n),w=e=>{switch(e){case 0:return(0,a.jsx)(S.Z,{className:"w-5 h-5 text-yellow-500"});case 1:return(0,a.jsx)(k.Z,{className:"w-5 h-5 text-gray-400"});case 2:return(0,a.jsx)(Z.Z,{className:"w-5 h-5 text-amber-600"});default:return(0,a.jsxs)("span",{className:"text-white/60 font-bold text-sm",children:["#",e+1]})}},f=e=>e.length<=10?e:"".concat(e.slice(0,6),"...").concat(e.slice(-4)),N=e=>{let s=Math.floor((Date.now()-e)/6e4);if(s<1)return"Just now";if(s<60)return"".concat(s,"m ago");let t=Math.floor(s/60);return t<24?"".concat(t,"h ago"):"".concat(Math.floor(t/24),"d ago")};return o?(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 ".concat(s),children:[(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 mb-4",children:[(0,a.jsx)(r.Z,{className:"w-6 h-6 text-yellow-400"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"Leaderboard"})]}),(0,a.jsxs)("div",{className:"text-center text-white/60",children:[(0,a.jsx)("div",{className:"animate-spin w-6 h-6 border-2 border-white/30 border-t-white rounded-full mx-auto mb-2"}),"Loading..."]})]}):(0,a.jsxs)("div",{className:"bg-white/10 backdrop-blur-lg rounded-xl p-6 ".concat(s),children:[(0,a.jsxs)("div",{className:"flex items-center justify-between mb-6",children:[(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)(r.Z,{className:"w-6 h-6 text-yellow-400"}),(0,a.jsx)("h2",{className:"text-xl font-bold text-white",children:"Leaderboard"})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-white/60",children:[(0,a.jsx)(c.Z,{className:"w-4 h-4"}),(0,a.jsxs)("span",{children:[b.length," players"]})]})]}),(0,a.jsxs)("div",{className:"text-xs text-white/50 mb-4 text-center",children:["Last updated: ",m.toLocaleTimeString()]}),(0,a.jsx)("div",{className:"space-y-3",children:0===g.length?(0,a.jsxs)("div",{className:"text-center text-white/60 py-8",children:[(0,a.jsx)(r.Z,{className:"w-12 h-12 mx-auto mb-3 opacity-50"}),(0,a.jsx)("p",{children:"No players yet"}),(0,a.jsx)("p",{className:"text-sm",children:"Be the first to play!"})]}):g.map((e,s)=>(0,a.jsxs)("div",{className:"flex items-center justify-between p-3 rounded-lg transition-all duration-200 ".concat(s<3?"bg-gradient-to-r from-yellow-500/20 to-yellow-600/20 border border-yellow-500/30":"bg-white/5 hover:bg-white/10"),children:[(0,a.jsxs)("div",{className:"flex items-center space-x-3",children:[(0,a.jsx)("div",{className:"flex items-center justify-center w-8 h-8",children:w(s)}),(0,a.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,a.jsx)("div",{className:"text-white font-medium",children:f(e.address)}),e.isOnline&&(0,a.jsx)("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]})]}),(0,a.jsxs)("div",{className:"flex items-center space-x-4 text-sm",children:[(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-white font-bold",children:e.score}),(0,a.jsx)("div",{className:"text-white/60",children:"points"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsxs)("div",{className:"text-white",children:[e.winRate.toFixed(0),"%"]}),(0,a.jsx)("div",{className:"text-white/60",children:"win rate"})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("div",{className:"text-white",children:e.gamesPlayed}),(0,a.jsx)("div",{className:"text-white/60",children:"games"})]}),(0,a.jsx)("div",{className:"text-right text-xs text-white/50",children:N(e.lastPlayed)})]})]},e.address))}),(0,a.jsx)("div",{className:"mt-6 pt-4 border-t border-white/10",children:(0,a.jsxs)("div",{className:"flex items-center justify-center space-x-2 text-xs text-white/50",children:[(0,a.jsx)(j.Z,{className:"w-3 h-3"}),(0,a.jsx)("span",{children:"Real-time updates"})]})})]})}var O=t(4934),D=t(4703);function P(e){let{children:s}=e,[t,n]=(0,l.useState)(!1);(0,l.useEffect)(()=>{n(!0)},[]);let i=(0,d.m)(),r=(0,O.$)(),c=(0,D.q)();return(0,a.jsx)(a.Fragment,{children:s({address:i.address,isConnected:i.isConnected,connect:r.connect,connectors:r.connectors,disconnect:c.disconnect,isClient:t})})}function I(e){let{address:s,isConnected:t,connect:d,connectors:o,disconnect:x,isClient:m}=e,[h,u]=(0,l.useState)("home"),[j,g]=(0,l.useState)(!1),[w,f]=(0,l.useState)(null),[p,v]=(0,l.useState)(null),S=()=>{u("home"),g(!1),f(null),v(null)};return m?t||j?"matchmaking"===h?(0,a.jsx)(b,{onMatchFound:e=>{f(e),u("duel")},onBack:S,isDemoMode:j,playerAddress:j?"0xDemoPlayer123...":s}):"duel"===h&&w?(0,a.jsx)(N,{match:w,onBack:S,isDemoMode:j}):"results"===h&&p?(0,a.jsx)(y,{results:p,onPlayAgain:S,isDemoMode:j}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100",children:(0,a.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,a.jsxs)("div",{className:"flex justify-between items-center mb-8",children:[(0,a.jsxs)("div",{className:"flex items-center gap-3",children:[(0,a.jsx)("div",{className:"w-10 h-10 bg-avalanche-500 rounded-full flex items-center justify-center",children:(0,a.jsx)(r.Z,{className:"w-6 h-6 text-white"})}),(0,a.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Math Duel Game"})]}),(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsxs)("div",{className:"text-sm text-gray-600",children:[null==s?void 0:s.slice(0,6),"...",null==s?void 0:s.slice(-4)]}),(0,a.jsx)("button",{onClick:()=>x(),className:"text-avalanche-600 hover:text-avalanche-700 font-medium",children:"Disconnect"})]})]}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto",children:(0,a.jsxs)("div",{className:"grid lg:grid-cols-3 gap-8",children:[(0,a.jsxs)("div",{className:"lg:col-span-2",children:[(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8 mb-8",children:[(0,a.jsxs)("div",{className:"text-center mb-8",children:[(0,a.jsx)("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Duel?"}),(0,a.jsx)("p",{className:"text-gray-600 text-lg",children:"Test your math skills in real-time 1v1 battles on Avalanche!"})]}),(0,a.jsxs)("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[(0,a.jsxs)("div",{className:"text-center p-6 bg-avalanche-50 rounded-xl",children:[(0,a.jsx)(c.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"1v1 Battles"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Face off against real opponents"})]}),(0,a.jsxs)("div",{className:"text-center p-6 bg-avalanche-50 rounded-xl",children:[(0,a.jsx)(r.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Win Rewards"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Winner takes all the stakes"})]}),(0,a.jsxs)("div",{className:"text-center p-6 bg-avalanche-50 rounded-xl",children:[(0,a.jsx)(i.Z,{className:"w-8 h-8 text-avalanche-500 mx-auto mb-3"}),(0,a.jsx)("h3",{className:"font-semibold text-gray-900 mb-2",children:"Real-time"}),(0,a.jsx)("p",{className:"text-sm text-gray-600",children:"Fast-paced math challenges"})]})]}),(0,a.jsx)("div",{className:"text-center",children:(0,a.jsxs)("button",{onClick:()=>u("matchmaking"),className:"bg-avalanche-500 hover:bg-avalanche-600 text-white font-bold py-4 px-8 rounded-xl text-lg transition-colors duration-200 flex items-center gap-3 mx-auto",children:[(0,a.jsx)(i.Z,{className:"w-6 h-6"}),"Find Opponent"]})})]}),(0,a.jsxs)("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:[(0,a.jsx)("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"How to Play"}),(0,a.jsxs)("div",{className:"space-y-4 text-gray-600",children:[(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-avalanche-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"1"}),(0,a.jsx)("p",{children:"Connect your wallet and get some USDC.e test tokens from the faucet"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-avalanche-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"2"}),(0,a.jsx)("p",{children:'Click "Find Opponent" to start matchmaking'})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-avalanche-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"3"}),(0,a.jsx)("p",{children:"Answer 3 math questions as fast and accurately as possible"})]}),(0,a.jsxs)("div",{className:"flex items-start gap-3",children:[(0,a.jsx)("div",{className:"w-6 h-6 bg-avalanche-500 text-white rounded-full flex items-center justify-center text-sm font-bold flex-shrink-0 mt-0.5",children:"4"}),(0,a.jsx)("p",{children:"Winner gets 2x the stake amount instantly!"})]})]})]})]}),(0,a.jsx)("div",{className:"max-w-7xl mx-auto mt-8",children:(0,a.jsx)(C,{})})]})})]})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100 flex items-center justify-center",children:(0,a.jsx)("div",{className:"bg-white rounded-2xl shadow-2xl p-8 max-w-md w-full mx-4",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"mx-auto w-16 h-16 bg-avalanche-500 rounded-full flex items-center justify-center mb-6",children:(0,a.jsx)(n.Z,{className:"w-8 h-8 text-white"})}),(0,a.jsx)("h1",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Math Duel Game"}),(0,a.jsx)("p",{className:"text-gray-600 mb-8",children:"Connect your wallet to start playing 1v1 math duels on Avalanche!"}),(0,a.jsxs)("div",{className:"space-y-3",children:[o.map(e=>(0,a.jsxs)("button",{onClick:()=>d({connector:e}),className:"w-full bg-avalanche-500 hover:bg-avalanche-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,a.jsx)(n.Z,{className:"w-5 h-5"}),"Connect ",e.name]},e.uid)),(0,a.jsxs)("div",{className:"relative",children:[(0,a.jsx)("div",{className:"absolute inset-0 flex items-center",children:(0,a.jsx)("div",{className:"w-full border-t border-gray-300"})}),(0,a.jsx)("div",{className:"relative flex justify-center text-sm",children:(0,a.jsx)("span",{className:"px-2 bg-white text-gray-500",children:"or"})})]}),(0,a.jsxs)("button",{onClick:()=>{g(!0),u("matchmaking")},className:"w-full bg-gray-500 hover:bg-gray-600 text-white font-semibold py-3 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:[(0,a.jsx)(i.Z,{className:"w-5 h-5"}),"Demo Mode (No Wallet)"]})]})]})})}):(0,a.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-avalanche-50 to-avalanche-100 flex items-center justify-center",children:(0,a.jsxs)("div",{className:"text-center",children:[(0,a.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-avalanche-500 mx-auto mb-4"}),(0,a.jsx)("p",{className:"text-gray-600",children:"Loading..."})]})})}function M(){return(0,a.jsx)(P,{children:e=>(0,a.jsx)(I,{...e})})}}},function(e){e.O(0,[50,52,971,23,744],function(){return e(e.s=399)}),_N_E=e.O()}]);